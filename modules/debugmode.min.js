function changeDebugMode(){!0===DEBUG_MODE?(debug("Debug Mode turned off"),setDebugMode(!1)):(setDebugMode(!0),debug("Debug Mode turned on"))}function moveDebugWindow(){layout(),DEBUG_DIV.className=/debugRight/.test(DEBUG_DIV.className)?"":"debugRight"}function timeStamp(t){var e,n,o,r=t.getMinutes(),i=t.getSeconds(),u=t.getMilliseconds();return DEBUG_COUNT++,DEBUG_TIME=t.getTime(),e=r<10?"0"+r:r.toString(),n=i<10?"0"+i:i.toString(),o=u<10?"0"+u:u.toString(),o=u<100?"0"+o:o,e+":"+n+":"+o}function _debug(t,e,n,o){function r(t,e,n){var o='<span class="debug-';return o+=t,o+='"',n&&(o+=' title="',o+=n,o+='"'),o+=">",o+=e.toString(),o+="</span>",o}function i(t){var e="";return t instanceof Function?e=r("function","function() {...}"):"number"==typeof t&&t>16e11&&t<2e12?e=r("number",t,new Date(t).toString()):"bigint"==typeof t?e=r(typeof t,t.toString()+"n"):null===t?e=r("error","null"):void 0===t?e=r("error","undefined"):"string"==typeof t?(""===t?e=r("error",'Empty string: ("")'):" "===t?e=r("error",'A space: (" ")'):(t=t.replace(/[\u00A0-\u9999<>\&]/gim,function(t){return"&#"+t.charCodeAt(0)+";"}),t=t.replace(/\r\n|\r|\n/g,r("text","NL")+"<br />"),e=r("string",t)),e.length>5007&&(e=e.slice(0,5e3)+"</span>"+r("text","...etc. etc. "+e.length/5e3+" times"))):e="object"==typeof t?t instanceof Date?r("date",t):t instanceof Array?u(t):t instanceof Error?r("error",t.name+": "+t.message,t.stack):r("text","{ "+d(t)+" }"):r(typeof t,t),t=null,e}function u(t){var e=[],n=t.length;if(0===n)return r("array","[ "+r("error","Empty array")+" ]");for(var o=0;o<n;o++)e[o]=i(t[o]);var u=r("array","[ "+e.join(", ")+" ]");return e=null,t=null,u}function l(t){function e(){for(u+="<br />",l=0;l<i;l++)u+="&nbsp;&nbsp;&nbsp;&nbsp;"}function n(n){n++;for(let o=1,r=t.length;n<r;n++)if("["===t[n]&&(o++,o>a&&(a=o)),"]"===t[n]&&(o--,0===o))return a>0&&(E=n,i++,e()),a;return 0}var o,r=!1,i=0,u="",l=0,d=0,a=0,E=0;for(let l=0,g=t.length;l<g;l++)"}"!==t[l]&&("]"!==t[l]||l!==E)||r||(i--,e()),u+=t[l],'"'===t[l]&&"\\"!==o?r=!r:r||(","===t[l]?(e()," "===t[l+1]&&l++):"["===t[l]?(l>E&&n(l),d++):"]"===t[l]?(d--,0===d&&(a=0)):"{"===t[l]&&(i++,e()," "===t[l+1]&&l++)),o=t[l];return u}function d(t){var e,n=[],o=0;for(let r in t)if(e=t[r],n[o]=r+": "+i(e),o++,o>25){n[o]="continued....";break}return o=null,t=null,e=null,n.join(",")}function a(){/debugmodeOn/.test(HTML_TAG.className)||(HTML_TAG.className=HTML_TAG.className+" debugmodeOn");var i=`<span class='debug-timestamp'>${t}</span><br />&nbsp;&nbsp;`;n?o||/error/i.test(n)?i+=r("error",n+" "+e):i+=`${n} ${e}`:i+=e,i+="<br />",i+=DEBUG_MESSAGE_DIV.innerHTML,DEBUG_MESSAGE_DIV.innerHTML=i,i=null}function E(e){n?console.log(t,n,e):console.log(t,e)}!0===DEBUG_TO_CONSOLE&&(o||n&&/error/i.test(n))&&setDebugMode(!0),!0===DEBUG_TO_CONSOLE&&console&&E(e),!0===DEBUG_MODE&&(e=e instanceof Array?l(u(e)):e instanceof Function?r("function","function() {...}"):e instanceof Date?r("date",e):null==e?i(e):e instanceof Error?r("error",e.name+": "+e.message,e.stack):"object"==typeof e?r("object","{ "+l(d(e))+" }"):i(e),a()),e=null,n=null}function trim(t){for(t=String(t);/\s\s/g.test(t);)t=t.replace(/\s\s/g," ");return" "===t?"":t.replace(/^\s+|\s+$/gm,"")}function layout(){var t=null!==window.innerWidth?window.innerWidth:null!==document.body&&null!==document.body.clientWidth?document.body.clientWidth:null!==window.screen?window.screen.availWidth:0,e="debugShowLarge ";t<=640&&(e="debugShowSmall "),HTML_TAG.className=trim(e+HTML_TAG.className.replace(/debugShowLarge|debugShowSmall/g,""))}function init(){var t=document.createElement("style"),e=document.createElement("span");e.appendChild(document.createTextNode("тип")),HIDE_DEBUG_BUTTON=document.createElement("button"),HIDE_DEBUG_BUTTON.id="hideDebug",HIDE_DEBUG_BUTTON.type="button",HIDE_DEBUG_BUTTON.className="close",HIDE_DEBUG_BUTTON.appendChild(e),DEBUG_MESSAGE_DIV=document.createElement("div"),DEBUG_MESSAGE_DIV.id="debugMsg",DEBUG_DIV=document.createElement("div"),DEBUG_DIV.id="debug",DEBUG_DIV.appendChild(HIDE_DEBUG_BUTTON),DEBUG_DIV.appendChild(DEBUG_MESSAGE_DIV),layout(),t.type="text/css",t.innerText="\n\n\t/* Style for debug panel */\n\t#debug {\n\t\tdisplay: none\n\t}\n\n\t#hideDebug {\n\t\tpadding: 6px 10px;\n\t\tcolor: red;\n\t\tposition: fixed;\n\t\tz-index: 1;\n\t\tbackground-color: transparent;\n\t\tborder: 1px solid transparent\n\t}\n\n\thtml.debugShowLarge #hideDebug {\n\t\tleft: 25%;\n\t\tright: auto;\n\t\tright: initial\n\t}\n\n\thtml.debugShowLarge #debug.debugRight #hideDebug {\n\t\tleft: auto;\n\t\tleft: initial;\n\t\tright: 22px\n\t}\n\n\thtml.debugShowSmall #hideDebug {\n\t\tleft: auto;\n\t\tleft: initial;\n\t\tright: 12px\n\t}\n\n\thtml.debugmodeOn #debug {\n\t\tcolor: #eee;\n\t\tbackground-color: #111;\n\t\tbackground-color: rgba(0,0,0,0.7);\n\t\ttext-shadow: 0 0 2px #000;\n\t\tfont-family: Consolas, 'Courier New', Courier, monospace;\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: auto;\n\t\tright: initial;\n\t\twidth: 30%;\n\t\tmax-width: 400px;\n\t\theight: 100%;\n\t\t-ms-word-wrap: break-word;\n\t\tword-wrap: break-word;\n\t\toverflow: auto;\n\t\tvisibility: visible;\n\t\tdisplay: block;\n\t\tz-index: 1099\n\t}\n\n\thtml.debugmodeOn #debug.debugRight {\n\t\tleft: auto;\n\t\tleft: initial;\n\t\tright: 0\n\t}\n\n\thtml.debugShowSmall #debug {\n\t\tposition: fixed;\n\t\twidth: 100%;\n\t\tmax-width: 100%;\n\t\theight: 45%;\n\t\ttop: auto;\n\t\ttop: initial;\n\t\tbottom: 0\n\t}\n\n\thtml.debugShowSmall #debug.debugRight {\n\t\ttop: 0;\n\t\tbottom: auto;\n\t\tbottom: initial\n\t}\n\n\t.debug-object {\n\t\tcolor: cyan\n\t}\n\n\t.debug-function {\n\t\tcolor: magenta\n\t}\n\n\t.debug-error {\n\t\tcolor: red\n\t}\n\n\t.debug-string {\n\t\tcolor: lightblue\n\t}\n\n\t.debug-boolean {\n\t\tcolor: lightgreen\n\t}\n\n\t.debug-date {\n\t\tcolor: pink\n\t}\n\n\t.debug-number {\n\t\tcolor: yellow\n\t}\n\n\t.debug-text {\n\t\tcolor: white\n\t}\n\n\t.debug-array {\n\t\tcolor: orange\n\t}\n\n\t.debug-bigint {\n\t\tcolor: limegreen\n\t}\n\n\t.debug-symbol {\n\t\tcolor: hotpink\n\t}\n\n\t.debug-timestamp {\n\t\tcolor: #CCC;\n\t\tfont-size:0.75em\n\t}",document.head.appendChild(t),window.document.body.insertBefore(DEBUG_DIV,window.document.body.firstChild),HIDE_DEBUG_BUTTON.addEventListener("click",changeDebugMode),DEBUG_DIV.addEventListener("click",moveDebugWindow),INITIATED=!0}function destroy(){HIDE_DEBUG_BUTTON&&HIDE_DEBUG_BUTTON.removeEventListener("click",changeDebugMode),DEBUG_DIV&&(DEBUG_DIV.removeEventListener("click",moveDebugWindow),window.document.body.removeChild(DEBUG_DIV)),HTML_TAG&&(HTML_TAG.className=trim(HTML_TAG.className.replace(/debugmodeOn|debugShowLarge|debugShowSmall/g,"")))}var HIDE_DEBUG_BUTTON,DEBUG_DIV,DEBUG_MESSAGE_DIV,DEBUG_COUNT=0,DEBUG_TIME=(new Date).getTime(),DEBUG_STOP=!1,DEBUG_MODE=!1,DEBUG_TO_CONSOLE=!1,ERROR_CACHE=[],CACHE_MSG_INDEX=0,INITIATED=!1,HTML_TAG=document.getElementsByTagName("html")[0];export function setDebugMode(t){if(!0===t){for(INITIATED||init(),DEBUG_MODE=t;CACHE_MSG_INDEX-- >0;)_debug.apply(null,ERROR_CACHE[CACHE_MSG_INDEX]);ERROR_CACHE=[]}else!1===t?(destroy(),INITIATED=!1,DEBUG_MODE=t):(DEBUG_MODE=!0,debug(t,"Error: Cannot set DebugMode to",!0));return DEBUG_MODE}export function setDebugToConsole(t){if(!0===t){for(INITIATED||init(),DEBUG_TO_CONSOLE=t;CACHE_MSG_INDEX-- >0;)_debug.apply(null,ERROR_CACHE[CACHE_MSG_INDEX]);ERROR_CACHE=[]}else!1===t?(DEBUG_TO_CONSOLE=t,!1===DEBUG_MODE&&(destroy(),INITIATED=!1)):(DEBUG_TO_CONSOLE=!0,debug(t,"Error: Cannot set DebugToConsole to",!0));return DEBUG_TO_CONSOLE}export function cacheMsg(t,e,n){!0===DEBUG_MODE?debug(t,e,n):(ERROR_CACHE[CACHE_MSG_INDEX]=[timeStamp(new Date),t,e,n],CACHE_MSG_INDEX++)}export function debug(t,e,n){if(INITIATED){var o=new Date;if(!0===DEBUG_STOP&&o.getTime()-DEBUG_TIME>5e3&&(DEBUG_COUNT=0,DEBUG_STOP=!1),!1===DEBUG_STOP&&DEBUG_COUNT>250&&o.getTime()<DEBUG_TIME+1e3){var r="<br />--TOO MANY MESSAGES LOGGED--<br /><br />";r+=DEBUG_MESSAGE_DIV.innerHTML,DEBUG_MESSAGE_DIV.innerHTML=r,r=null,DEBUG_STOP=!0}!1===DEBUG_STOP&&_debug(timeStamp(o),t,e,n),o=null}}