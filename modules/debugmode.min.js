function changeDebugMode(t){t&&t.stopPropagation(),!0===DEBUG_MODE?(debug("Debug Mode turned off"),setDebugMode(!1)):(setDebugMode(!0),debug("Debug Mode turned on"))}function moveDebugWindow(){layout(),DEBUG_DIV.className=/debugRight/.test(DEBUG_DIV.className)?"":"debugRight"}function timeStamp(t){var e,n,o,r=t.getMinutes(),i=t.getSeconds(),d=t.getMilliseconds();return DEBUG_COUNT++,DEBUG_TIME=t.getTime(),e=r<10?"0"+r:r.toString(),n=i<10?"0"+i:i.toString(),o=d<10?"0"+d:d.toString(),o=d<100?"0"+o:o,e+":"+n+":"+o}function _debug(t,e,n,o){function r(t,e,n){var o='<span class="debug-';return o+=t,o+='"',n&&(o+=' title="',o+=n,o+='"'),o+=">",o+=e.toString(),o+="</span>",o}function i(t,e=[]){var n="";return t instanceof Function?n=r("function","function() {...}"):"number"==typeof t&&t>16e11&&t<2e12?n=r("number",t,new Date(t).toString()):"bigint"==typeof t?n=r(typeof t,t.toString()+"n"):null===t?n=r("error","null"):void 0===t?n=r("error","undefined"):"string"==typeof t?(""===t?n=r("error",'Empty string: ("")'):" "===t?n=r("error",'A space: (" ")'):(t=t.replace(/[\u00A0-\u9999<>\&]/gim,function(t){return"&#"+t.charCodeAt(0)+";"}),t=t.replace(/\r\n|\r|\n/g,r("text","NL")+"<br />"),n=r("string",t)),n.length>5007&&(n=n.slice(0,5e3)+"</span>"+r("text","...etc. etc. "+n.length/5e3+" times"))):n="object"==typeof t?t instanceof Date?r("date",t):t instanceof Array?d(t,e):t instanceof Error?r("error",t.name+": "+t.message,t.stack):t instanceof RegExp?r("regexp",t.toString()):t instanceof Symbol?r("symbol",t.toString()):r("object","{ "+u(t,e)+" }"):r(typeof t,t),t=null,n}function d(t,e=[]){var n=[],o=t.length;if(0===o)return r("array","[ "+r("error","Empty array")+" ]");for(var d=0;d<o;d++)n[d]=i(t[d],e);var a=r("array","[ "+n.join(", ")+" ]");return n=null,t=null,a}function a(t){function e(){for(d+="<br />",a=0;a<i;a++)d+="&nbsp;&nbsp;&nbsp;"}function n(n){n++;for(let o=1,r=t.length;n<r;n++)if("["===t[n]&&(o++,o>E&&(E=o)),"]"===t[n]&&(o--,0===o))return E>0&&(l=n,i++,e()),E;return 0}var o,r=!1,i=0,d="",a=0,u=0,E=0,l=0;for(let a=0,D=t.length;a<D;a++)"}"!==t[a]&&("]"!==t[a]||a!==l)||r||(i--,e()),d+=t[a],'"'===t[a]&&"\\"!==o?r=!r:r||(","===t[a]&&(0===u||u<E)?(e()," "===t[a+1]&&a++):"["===t[a]?(a>l&&n(a),u++):"]"===t[a]?(u--,0===u&&(E=0)):"{"===t[a]&&(i++,e()," "===t[a+1]&&a++)),o=t[a];return d}function u(t,e=[]){var n,o=[],d=0;if(-1!==e.indexOf(t))return r("error","Circular reference");e.push(t);for(let a in t)if(n=t[a],"function"==typeof(null===(_a=Object.getOwnPropertyDescriptor(t,a))||void 0===_a?void 0:_a.get)||"function"==typeof(null===(_b=Object.getOwnPropertyDescriptor(t,a))||void 0===_b?void 0:_b.set)?o[d]=a+" (getter/setter): "+r("function",i(n,e)):o[d]=a+": "+i(n,e),d++,d>25){o[d]="continued....";break}return d=null,t=null,n=null,e.pop(),o.join(",")}function E(){/debugmodeOn/.test(HTML_TAG.className)||(HTML_TAG.className=HTML_TAG.className+" debugmodeOn");var i=`<span class='debug-timestamp'>${t}</span><br />&nbsp;&nbsp;`;n?o||/error/i.test(n)?i+=r("error",n+" "+e):i+=`${n} ${e}`:i+=e,i+="<br />",i+=DEBUG_MESSAGE_DIV.innerHTML,DEBUG_MESSAGE_DIV.innerHTML=i,i=null}function l(e){n?console.log(t,n,e):console.log(t,e)}!0===DEBUG_TO_CONSOLE&&(o||n&&/error/i.test(n))&&setDebugMode(!0),!0===DEBUG_TO_CONSOLE&&console&&l(e),!0===DEBUG_MODE&&(e=e instanceof Array?a(d(e)):e instanceof Function?r("function","function() {...}"):e instanceof Date?r("date",e):null==e?i(e):e instanceof Error?r("error",e.name+": "+e.message,e.stack):"object"==typeof e?r("object","{ "+a(u(e))+" }"):i(e),E()),e=null,n=null}function trim(t){for(t=String(t);/\s\s/g.test(t);)t=t.replace(/\s\s/g," ");return" "===t?"":t.replace(/^\s+|\s+$/gm,"")}function layout(){var t=null!==window.innerWidth?window.innerWidth:null!==document.body&&null!==document.body.clientWidth?document.body.clientWidth:null!==window.screen?window.screen.availWidth:0,e="debugShowLarge ";t<=640&&(e="debugShowSmall "),HTML_TAG.className=trim(e+HTML_TAG.className.replace(/debugShowLarge|debugShowSmall/g,""))}function init(){var t=document.createElement("style");DEBUG_BUTTONS=document.createElement("div"),DEBUG_BUTTONS.id="debugButtons",CLEAR_DEBUG_BUTTON=document.createElement("button"),CLEAR_DEBUG_BUTTON.id="clearDebug",CLEAR_DEBUG_BUTTON.type="button",CLEAR_DEBUG_BUTTON.title="Clear and Hide Debug Window",CLEAR_DEBUG_BUTTON.appendChild(document.createTextNode("_")),EXPAND_DEBUG_BUTTON=document.createElement("button"),EXPAND_DEBUG_BUTTON.id="expandDebug",EXPAND_DEBUG_BUTTON.type="button",EXPAND_DEBUG_BUTTON.title="Toggle Fullscreen",EXPAND_DEBUG_BUTTON.appendChild(document.createTextNode("◻")),HIDE_DEBUG_BUTTON=document.createElement("button"),HIDE_DEBUG_BUTTON.id="hideDebug",HIDE_DEBUG_BUTTON.type="button",HIDE_DEBUG_BUTTON.title="Close Debug Window",HIDE_DEBUG_BUTTON.appendChild(document.createTextNode("⨯")),DEBUG_MESSAGE_DIV=document.createElement("div"),DEBUG_MESSAGE_DIV.id="debugMsg",DEBUG_DIV=document.createElement("div"),DEBUG_DIV.id="debug",DEBUG_BUTTONS.appendChild(CLEAR_DEBUG_BUTTON),DEBUG_BUTTONS.appendChild(EXPAND_DEBUG_BUTTON),DEBUG_BUTTONS.appendChild(HIDE_DEBUG_BUTTON),DEBUG_DIV.appendChild(DEBUG_BUTTONS),DEBUG_DIV.appendChild(DEBUG_MESSAGE_DIV),layout(),t.type="text/css",t.innerText="\n\n\t/* Style for debug panel */\n\t#debug {\n\t\tdisplay: none;\n\t}\n\n\t#debugButtons {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 16px;\n\t\tz-index: 1;\n\t}\n\n\t#hideDebug,\n\t#expandDebug, \n\t#clearDebug {\n\t\tcursor: pointer;\n\t\tbackground-color: transparent;\n\t\tborder: 1px solid transparent;\n\t\tdisplay: inline-block;\n\t\tvertical-align: middle;\n\t\tfont-size: 1em;\n\t\tfont-weight: bold;\n\t\tfont-family: Arial, sans-serif;\n\t\tpadding: 8px;\n\t}\n\n\t#hideDebug {\n\t\tfont-size: 1.3em;\n\t}\n\n\t#expandDebug {\n\t\tfont-size: 1.1em;\n\t}\n\n\thtml.debugmodeOn #debug {\n\t\tcolor: #eee;\n\t\tbackground-color: #111;\n\t\tbackground-color: rgba(0,0,0,0.7);\n\t\ttext-shadow: 0 0 2px #000;\n\t\tfont-family: Consolas, 'Courier New', Courier, monospace;\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: auto;\n\t\tright: initial;\n\t\twidth: auto;\n\t\tmin-width: 25%;\n\t\tmax-width: 40%;\n\t\theight: 100%;\n\t\tvisibility: visible;\n\t\tdisplay: block;\n\t\tz-index: 1099;\n\t}\n\n\thtml.debugmodeOn #debugMsg {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\t-ms-word-wrap: break-word;\n\t\tword-wrap: break-word;\n\t\toverflow: auto;\n\t\t-webkit-user-select: text;\n\t\t-moz-user-select: text;\n\t\t-ms-user-select: text;\n\t\tuser-select: text;\n\t}\n\n\thtml.debugmodeOn #debug.debugRight {\n\t\tleft: auto;\n\t\tleft: initial;\n\t\tright: 0;\n\t}\n\n\thtml.debugShowSmall #debug {\n\t\tposition: fixed;\n\t\twidth: 100%;\n\t\tmax-width: 100%;\n\t\theight: 45%;\n\t\ttop: auto;\n\t\ttop: initial;\n\t\tbottom: 0;\n\t}\n\n\thtml.debugShowSmall #debug.debugRight {\n\t\ttop: 0;\n\t\tbottom: auto;\n\t\tbottom: initial;\n\t}\n\n\thtml.debugmodeOn.debugExpanded #debug {\n\t\twidth: 100%;\n\t\tmax-width: 100%;\n\t\theight: 100%;\n\t}\n\n\t.debug-object {\n\t\tcolor: white;\n\t}\n\n\t.debug-function {\n\t\tcolor: magenta;\n\t}\n\n\t.debug-error {\n\t\tcolor: red;\n\t}\n\n\t.debug-string {\n\t\tcolor: lightblue;\n\t}\n\n\t.debug-boolean {\n\t\tcolor: lightgreen;\n\t}\n\n\t.debug-date {\n\t\tcolor: pink;\n\t}\n\n\t.debug-number {\n\t\tcolor: yellow;\n\t}\n\n\t.debug-text {\n\t\tcolor: lightgray;\n\t}\n\n\t.debug-array {\n\t\tcolor: orange;\n\t}\n\n\t.debug-bigint {\n\t\tcolor: limegreen;\n\t}\n\n\t.debug-symbol {\n\t\tcolor: hotpink;\n\t}\n\n\t.debug-regexp {\n\t\tcolor: cyan;\n\t}\n\n\t.debug-timestamp {\n\t\tcolor: #CCC;\n\t\tfont-size: 0.75em;\n\t}",document.head.appendChild(t),window.document.body.insertBefore(DEBUG_DIV,window.document.body.firstChild),HIDE_DEBUG_BUTTON.addEventListener("click",changeDebugMode),EXPAND_DEBUG_BUTTON.addEventListener("click",expandDebugWindow),CLEAR_DEBUG_BUTTON.addEventListener("click",clearDebug),DEBUG_DIV.addEventListener("click",moveDebugWindow),INITIATED=!0}function expandDebugWindow(t){t&&t.stopPropagation(),HTML_TAG&&(/debugExpanded/.test(HTML_TAG.className)?HTML_TAG.className=trim(HTML_TAG.className.replace(/debugExpanded/g,"")):HTML_TAG.className=trim("debugExpanded "+HTML_TAG.className))}function clearDebug(t){t&&t.stopPropagation(),DEBUG_MESSAGE_DIV.innerHTML="",HTML_TAG&&(HTML_TAG.className=trim(HTML_TAG.className.replace(/debugmodeOn/g,"")))}function destroy(){HIDE_DEBUG_BUTTON&&HIDE_DEBUG_BUTTON.removeEventListener("click",changeDebugMode),EXPAND_DEBUG_BUTTON&&EXPAND_DEBUG_BUTTON.removeEventListener("click",expandDebugWindow),CLEAR_DEBUG_BUTTON&&CLEAR_DEBUG_BUTTON.removeEventListener("click",clearDebug),DEBUG_DIV&&(DEBUG_DIV.removeEventListener("click",moveDebugWindow),window.document.body.removeChild(DEBUG_DIV)),HTML_TAG&&(HTML_TAG.className=trim(HTML_TAG.className.replace(/debugmodeOn|debugShowLarge|debugShowSmall/g,"")))}var DEBUG_BUTTONS,HIDE_DEBUG_BUTTON,EXPAND_DEBUG_BUTTON,CLEAR_DEBUG_BUTTON,DEBUG_DIV,DEBUG_MESSAGE_DIV,DEBUG_COUNT=0,DEBUG_TIME=(new Date).getTime(),DEBUG_STOP=!1,DEBUG_MODE=!1,DEBUG_TO_CONSOLE=!1,ERROR_CACHE=[],CACHE_MSG_INDEX=0,INITIATED=!1,HTML_TAG=document.getElementsByTagName("html")[0];export function setDebugMode(t){if(!0===t){for(INITIATED||init(),DEBUG_MODE=t;CACHE_MSG_INDEX-- >0;)_debug.apply(null,ERROR_CACHE[CACHE_MSG_INDEX]);ERROR_CACHE=[]}else!1===t?(destroy(),INITIATED=!1,DEBUG_MODE=t):(DEBUG_MODE=!0,debug(t,"Error: Cannot set DebugMode to",!0));return DEBUG_MODE}export function setDebugToConsole(t){if(!0===t){for(INITIATED||init(),DEBUG_TO_CONSOLE=t;CACHE_MSG_INDEX-- >0;)_debug.apply(null,ERROR_CACHE[CACHE_MSG_INDEX]);ERROR_CACHE=[]}else!1===t?(DEBUG_TO_CONSOLE=t,!1===DEBUG_MODE&&(destroy(),INITIATED=!1)):(DEBUG_TO_CONSOLE=!0,debug(t,"Error: Cannot set DebugToConsole to",!0));return DEBUG_TO_CONSOLE}export function cacheMsg(t,e,n){!0===DEBUG_MODE?debug(t,e,n):(ERROR_CACHE[CACHE_MSG_INDEX]=[timeStamp(new Date),t,e,n],CACHE_MSG_INDEX++)}export function debug(t,e,n){if(INITIATED){var o=new Date;if(!0===DEBUG_STOP&&o.getTime()-DEBUG_TIME>5e3&&(DEBUG_COUNT=0,DEBUG_STOP=!1),!1===DEBUG_STOP&&DEBUG_COUNT>250&&o.getTime()<DEBUG_TIME+1e3){var r="<br />--TOO MANY MESSAGES LOGGED--<br /><br />";r+=DEBUG_MESSAGE_DIV.innerHTML,DEBUG_MESSAGE_DIV.innerHTML=r,r=null,DEBUG_STOP=!0}!1===DEBUG_STOP&&_debug(timeStamp(o),t,e,n),o=null}}