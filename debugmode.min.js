var APP = APP || {}; (function () { "use strict"; function a() { u === !0 ? (APP.debug("Debug Mode turned off"), APP.setDebugMode(!1)) : (APP.setDebugMode(!0), APP.debug("Debug Mode turned on")) } function v() { n.className = /debugRight/.test(n.className) ? "" : "debugRight" } function y(n) { var i = n.getMinutes(), r = n.getSeconds(), t = n.getMilliseconds(); return h++ , c = n.getTime(), i = i < 10 ? "0" + i : i, r = r < 10 ? "0" + r : r, t = t < 10 ? "0" + t : t, t = t < 100 ? "0" + t : t, i + ":" + r + ":" + t } function o(n, t, i, f) { function e(n, t, i) { var r = '<span class="debug-'; return r += n, r += '"', i && (r += ' title="', r += i, r += '"'), r += ">", r += t, r + "<\/span>" } function c(n) { var t = ""; return n instanceof Function ? t = e("function", "function() {...}") : typeof n == "number" ? t = n > 15e11 && n < 2e12 ? e("number", n, new Date(n)) : e("number", n) : n === null ? t = e("error", "null") : typeof n == "undefined" ? t = e("error", "undefined") : typeof n == "string" ? (n === "" ? t = e("error", 'Empty string: ("")') : n === " " ? t = e("error", 'A space: (" ")') : (n = n.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"), n = n.replace(/\r\n|\r|\n/g, e("text", "NL") + "<br />"), t = e("string", n)), t.length > 5007 && (t = t.slice(0, 5e3) + "<\/span>" + e("text", "...etc. etc. " + parseInt(t.length / 5e3) + " times"))) : t = typeof n == "boolean" ? e("boolean", n) : typeof n == "object" ? n instanceof Date ? e("date", n) : n instanceof Array ? l(n) : e("text", "{ " + a(n) + " }") : e("error", "???: " + n), n = null, t } function l(n) { var i = [], r = n.length, t, u; if (r === 0) return e("array", "[ " + e("error", "Empty array") + " ]"); for (t = 0; t < r; t++)i[t] = c(n[t]); return u = e("array", "[ " + i.join(", ") + " ]"), i = null, n = null, u } function a(n) { var i = [], t = 0, r; for (var u in n) if (r = n[u], i[t] = u + ": " + c(r), t++ , t > 50) { i[t] = "continued...."; break } return t = null, n = null, u = null, r = null, i.join(",<br />") } var o, h; (u === !0 || s === !0 && console && console.log) && (n = n instanceof Array ? l(n) : n instanceof Function ? e("function", "function() {...}") : n instanceof Date ? e("date", n) : typeof n == "object" ? e("object", "{ " + a(n) + " }") : c(n)); u === !0 && (o = "<span class='debug-timestamp'>", o += f, o += "    <\/span><br />&nbsp;&nbsp;", o += t ? i !== undefined || /error/i.test(t) ? e("error", t + " " + n) : t + " " + n : n, o += "<br />", o += r.innerHTML, r.innerHTML = o, o = null); s === !0 && console && console.log && (h = f, t && (h += "   " + t + ":\n         "), h += "   ", h += n, console.log(h.replace(/<\/?span[^>]*>/g, "").replace(/<br \/>/g, "\n            ")), h = null); n = null; t = null } function p() { var i = document.createElement("style"), u = document.createElement("span"); u["aria-hidden"] = !0; u.appendChild(document.createTextNode("тип")); t = document.createElement("button"); t.id = "hideDebug"; t.type = "button"; t.class = "close"; t["aria-label"] = "Close debug window"; t.appendChild(u); r = document.createElement("div"); r.id = "debugMsg"; n = document.createElement("div"); n.id = "debug"; n.appendChild(t); n.appendChild(r); i.type = "text/css"; i.innerText = "#debug {display: none;} #hideDebug {padding: 6px 10px;color: red;position: fixed;} html.tabl #hideDebug, html.desk #hideDebug {left: 25%;right: auto;right: initial;} html.tabl #debug.debugRight #hideDebug, html.desk #debug.debugRight #hideDebug {left: auto;left: initial;right: 22px;} html.phon #hideDebug {left: auto;left: initial;right: 12px;} #debug {color: #eee;background-color: #111;background-color: rgba(0, 0, 0, 0.7);text-shadow: 0 0 2px #000;font-family: Consolas, Courier New, Courier, monospace;position: absolute;top: 0;left: 0;right: auto;right: initial;width: 30%;max-width: 400px;height: 100%;-ms-word-wrap: break-word;word-wrap: break-word;overflow: auto;visibility: visible;display: block;z-index: 1099;} #debug.debugRight {left: auto;left: initial;right: 0;} html.phon #debug {position: fixed;width: 100%;max-width: 100%;height: 45%;top: auto;top: initial;bottom: 0;} html.phon #debug.debugRight {top: 0;bottom: auto;bottom: initial;} .debug-object {color: cyan;} .debug-function {color: magenta;}.debug-error {color: red;}.debug-string {color: lightblue;}.debug-boolean {color: lightgreen;}.debug-date {color: pink;}.debug-number {color: yellow;}.debug-text {color: white;}.debug-array {color: orange;}.debug-timestamp {color: #CCC;font-size: 0.75em;}"; document.head.appendChild(i); window.document.body.insertBefore(n, window.document.body.firstChild); t.addEventListener("click", a); n.addEventListener("click", v); l = !0 } function w() { t.removeEventListener("click", a); n.removeEventListener("click", v); window.document.body.removeChild(n) } var h = 0, c = (new Date).getTime(), f = !1, u = !1, s = !1, e = [], i = 0, l = !1, t, n, r; APP.setDebugMode = function (n) { var t = n; if (n === !0 || /y|true/g.test(t)) { for (l || p(), n = !0; i;)i-- , o(e[i]); e = [] } else n === !1 || /n|f/g.test(t) ? (w(), l = !1, n = !1) : (u = !0, APP.debug(span("error", "Error: Cannot set DEBUGMODE to " + n))); return u = n, n }; APP.setDebugToConsole = function (n) { var t = n; if (n === !0 || /y|true/g.test(t)) { for (n = !0; i;)i-- , o(e[i]); e = [] } else n === !1 || /n|f/g.test(t) ? n = !1 : (s = !0, APP.debug(span("error", "Error: Cannot set DEBUGTOCONSOLE to " + n))); return s = n, n }; APP.CacheMsg = function (n, t, r) { u === !0 ? o(n, t) : (e[i] = [y(new Date), t, n, r], i++) }; APP.debug = function (n, t, i) { var u = new Date, e; f === !0 && u.getTime() - c > 5e3 && (h = 0, f = !1); f === !1 && h > 250 && u.getTime() < c + 1e3 && (e = "<br />--TOO MANY MESSAGES LOGGED--<br /><br />", e += r.innerHTML, r.innerHTML = e, e = null, f = !0); f === !1 && o(n, t, i, y(u)); u = null } })();