var APP=APP||{};!function(){"use strict";function e(){!0===s?(APP.debug("Debug Mode turned off"),APP.setDebugMode(!1)):(APP.setDebugMode(!0),APP.debug("Debug Mode turned on"))}function t(){i(),a.className=/debugRight/.test(a.className)?"":"debugRight"}function n(e){var t=e.getMinutes(),n=e.getSeconds(),o=e.getMilliseconds();return u++,g=e.getTime(),(t=t<10?"0"+t:t)+":"+(n=n<10?"0"+n:n)+":"+(o=(o=o<10?"0"+o:o)<100?"0"+o:o)}function o(e,t,n,o){function r(e,t,n){var o='<span class="debug-';return o+=e,o+='"',n&&(o+=' title="',o+=n,o+='"'),o+=">",o+=t,o+="</span>"}function i(e){var t="";return e instanceof Function?t=r("function","function() {...}"):"number"==typeof e?t=e>15e11&&e<2e12?r("number",e,new Date(e)):r("number",e):null===e?t=r("error","null"):void 0===e?t=r("error","undefined"):"string"==typeof e?(""===e?t=r("error",'Empty string: ("")'):" "===e?t=r("error",'A space: (" ")'):(e=(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/\r\n|\r|\n/g,r("text","NL")+"<br />"),t=r("string",e)),t.length>5007&&(t=t.slice(0,5e3)+"</span>"+r("text","...etc. etc. "+parseInt(t.length/5e3)+" times"))):t="boolean"==typeof e?r("boolean",e):"object"==typeof e?e instanceof Date?r("date",e):e instanceof Array?l(e):r("text","{ "+u(e)+" }"):r("error","???: "+e),e=null,t}function l(e){var t=[],n=e.length;if(0===n)return r("array","[ "+r("error","Empty array")+" ]");for(var o=0;o<n;o++)t[o]=i(e[o]);var l=r("array","[ "+t.join(", ")+" ]");return t=null,e=null,l}function a(e){function t(){for(l+="<br />",a=0;a<i;a++)l+="&nbsp;&nbsp;&nbsp;&nbsp;"}function n(n){n++;for(let o=1,r=e.length;n<r;n++)if("["===e[n]&&++o>u&&(u=o),"]"===e[n]&&0===--o)return u>0&&(g=n,i++,t()),u}var o,r=!1,i=0,l="",a=0,d=0,u=0,g=0;for(let a=0,c=e.length;a<c;a++)"}"!==e[a]&&("]"!==e[a]||a!==g)||r||(i--,t()),l+=e[a],'"'===e[a]&&"\\"!==o?r=!r:r||(","===e[a]?(t()," "===e[a+1]&&a++):"["===e[a]?(a>g&&n(a),d++):"]"===e[a]?0===--d&&(u=0):"{"===e[a]&&(i++,t()," "===e[a+1]&&a++)),o=e[a];return l}function u(e){var t,n=[],o=0;for(let r in e)if(t=e[r],n[o]=r+": "+i(t),++o>25){n[o]="continued....";break}return o=null,e=null,t=null,n.join(",")}var g;!0!==b||void 0===n&&!/error/i.test(t)||APP.setDebugMode(!0),(!0===s||!0===b&&console&&console.log)&&(e=e instanceof Array?a(l(e)):e instanceof Function?r("function","function() {...}"):e instanceof Date?r("date",e):null==e?i(e):"object"==typeof e?r("object","{ "+a(u(e))+" }"):i(e)),!0===s&&function(){/debugmodeOn/.test(h.className)||(h.className=h.className+" debugmodeOn");var i="<span class='debug-timestamp'>";i+=o,i+="    </span><br />&nbsp;&nbsp;",t?void 0!==n||/error/i.test(t)?i+=r("error",t+" "+e):i+=t+" "+e:i+=e,i+="<br />",i+=d.innerHTML,d.innerHTML=i,i=null}(),!0===b&&console&&console.log&&(g=o,t&&(g+="   "+t+":\n         "),g+="   ",g+=e,console.log(g.replace(/<\/?span[^>]*>/g,"").replace(/<br \/>/g,"\n            ").replace(/&nbsp;/g," ")),g=null),e=null,t=null}function r(e){for(e=String(e);/\s\s/g.test(e);)e=e.replace(/\s\s/g," ");return" "===e?"":e.replace(/^\s+|\s+$/gm,"")}function i(){var e="debugShowLarge ";(null!==window.innerWidth?window.innerWidth:null!==document.body&&null!==document.body.clientWidth?document.body.clientWidth:null!==window.screen?window.screen.availWidth:0)<=640&&(e="debugShowSmall "),h.className=r(e+h.className.replace(/debugShowLarge|debugShowSmall/g,""))}var l,a,d,u=0,g=(new Date).getTime(),c=!1,s=!1,b=!1,m=[],f=0,p=!1,h=document.getElementsByTagName("html")[0];APP.setDebugMode=function(n){if(!0===n){for(p||(u=document.createElement("style"),(g=document.createElement("span"))["aria-hidden"]=!0,g.appendChild(document.createTextNode("тип")),(l=document.createElement("button")).id="hideDebug",l.type="button",l.class="close",l["aria-label"]="Close debug window",l.appendChild(g),(d=document.createElement("div")).id="debugMsg",(a=document.createElement("div")).id="debug",a.appendChild(l),a.appendChild(d),i(),u.type="text/css",u.innerText="#debug{display:none} #hideDebug{padding:6px 10px;color:red;position:fixed} html.debugShowLarge #hideDebug{left:25%;right:auto;right:initial} html.debugShowLarge #debug.debugRight #hideDebug{left:auto;left:initial;right:22px} html.debugShowSmall #hideDebug {left:auto;left:initial;right:12px} html.debugmodeOn #debug{color:#eee;background-color:#111;background-color:rgba(0,0,0,0.7);text-shadow:0 0 2px #000;font-family:Consolas,Courier New,Courier,monospace;position:fixed;top:0;left:0;right:auto;right:initial;width:30%;max-width:400px;height:100%;-ms-word-wrap:break-word;word-wrap:break-word;overflow:auto;visibility:visible;display:block;z-index:1099} html.debugmodeOn #debug.debugRight{left:auto;left:initial;right:0} html.debugShowSmall #debug{position:fixed;width:100%;max-width:100%;height:45%;top:auto;top:initial;bottom:0} html.debugShowSmall #debug.debugRight{top:0;bottom:auto;bottom:initial} .debug-object{color:cyan} .debug-function{color:magenta} .debug-error{color:red} .debug-string{color:lightblue} .debug-boolean{color:lightgreen} .debug-date{color:pink} .debug-number{color:yellow} .debug-text{color:white} .debug-array{color:orange} .debug-timestamp{color:#CCC;font-size:0.75em}",document.head.appendChild(u),window.document.body.insertBefore(a,window.document.body.firstChild),l.addEventListener("click",e),a.addEventListener("click",t),p=!0),n=!0;f;)o(m[--f]);m=[]}else!1===n?(l&&l.removeEventListener("click",e),a&&(a.removeEventListener("click",t),window.document.body.removeChild(a)),h&&(h.className=r(h.className.replace(/debugmodeOn|debugShowLarge|debugShowSmall/g,""))),p=!1,n=!1):(s=!0,APP.debug(n,"Error: Cannot set DebugMode to",!0));var u,g;return s=n,n},APP.setDebugToConsole=function(e){if(!0===e){for(e=!0;f;)o(m[--f]);m=[]}else!1===e?e=!1:(b=!0,APP.debug(e,"Error: Cannot set DebugToConsole to",!0));return b=e,e},APP.CacheMsg=function(e,t,o){!0===s?APP.debug(e,t,o):(m[f]=[n(new Date),t,e,o],f++)},APP.debug=function(e,t,r){var i=new Date;if(!0===c&&i.getTime()-g>5e3&&(u=0,c=!1),!1===c&&u>250&&i.getTime()<g+1e3){var l="<br />--TOO MANY MESSAGES LOGGED--<br /><br />";l+=d.innerHTML,d.innerHTML=l,l=null,c=!0}!1===c&&o(e,t,r,n(i)),i=null}}();