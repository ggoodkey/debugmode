"use strict";var APP;(function(e){function t(){!0===y?(e.debug("Debug Mode turned off"),e.setDebugMode(!1)):(e.setDebugMode(!0),e.debug("Debug Mode turned on"))}function n(){l(),m.className=/debugRight/.test(m.className)?"":"debugRight"}function o(e){var t,n,o,r=e.getMinutes(),i=e.getSeconds(),l=e.getMilliseconds();return p++,h=e.getTime(),t=r<10?"0"+r:r.toString(),n=i<10?"0"+i:i.toString(),o=l<10?"0"+l:l.toString(),o=l<100?"0"+o:o,t+":"+n+":"+o}function r(t,n,o,r){function i(e,t,n){var o='<span class="debug-';return o+=e,o+='"',n&&(o+=' title="',o+=n,o+='"'),o+=">",o+=t.toString(),o+="</span>",o}function l(e){var t="";return e instanceof Function?t=i("function","function() {...}"):"number"==typeof e&&e>16e11&&e<2e12?t=i("number",e,new Date(e).toString()):"bigint"==typeof e?t=i(typeof e,e.toString()+"n"):null===e?t=i("error","null"):void 0===e?t=i("error","undefined"):"string"==typeof e?(""===e?t=i("error",'Empty string: ("")'):" "===e?t=i("error",'A space: (" ")'):(e=e.replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"}),e=e.replace(/\r\n|\r|\n/g,i("text","NL")+"<br />"),t=i("string",e)),t.length>5007&&(t=t.slice(0,5e3)+"</span>"+i("text","...etc. etc. "+t.length/5e3+" times"))):t="object"==typeof e?e instanceof Date?i("date",e):e instanceof Array?u(e):e instanceof Error?i("error",e.name+": "+e.message,e.stack):i("text","{ "+d(e)+" }"):i(typeof e,e),e=null,t}function u(e){var t=[],n=e.length;if(0===n)return i("array","[ "+i("error","Empty array")+" ]");for(var o=0;o<n;o++)t[o]=l(e[o]);var r=i("array","[ "+t.join(", ")+" ]");return t=null,e=null,r}function a(e){function t(){for(l+="<br />",u=0;u<i;u++)l+="&nbsp;&nbsp;&nbsp;&nbsp;"}function n(n){n++;for(let o=1,r=e.length;n<r;n++)if("["===e[n]&&(o++,o>d&&(d=o)),"]"===e[n]&&(o--,0===o))return d>0&&(c=n,i++,t()),d;return 0}var o,r=!1,i=0,l="",u=0,a=0,d=0,c=0;for(let u=0,g=e.length;u<g;u++)"}"!==e[u]&&("]"!==e[u]||u!==c)||r||(i--,t()),l+=e[u],'"'===e[u]&&"\\"!==o?r=!r:r||(","===e[u]?(t()," "===e[u+1]&&u++):"["===e[u]?(u>c&&n(u),a++):"]"===e[u]?(a--,0===a&&(d=0)):"{"===e[u]&&(i++,t()," "===e[u+1]&&u++)),o=e[u];return l}function d(e){var t,n=[],o=0;for(let r in e)if(t=e[r],n[o]=r+": "+l(t),o++,o>25){n[o]="continued....";break}return o=null,e=null,t=null,n.join(",")}function c(){/debugmodeOn/.test(E.className)||(E.className=E.className+" debugmodeOn");var e="<span class='debug-timestamp'>";e+=t,e+="</span><br />&nbsp;&nbsp;",o?r||/error/i.test(o)?e+=i("error",o+" "+n):e+=o+" "+n:e+=n,e+="<br />",e+=f.innerHTML,f.innerHTML=e,e=null}function g(e){o?console.log(t,o,e):console.log(t,e)}!0===v&&(r||o&&/error/i.test(o))&&e.setDebugMode(!0),!0===v&&console&&g(n),!0===y&&(n=n instanceof Array?a(u(n)):n instanceof Function?i("function","function() {...}"):n instanceof Date?i("date",n):null==n?l(n):n instanceof Error?i("error",n.name+": "+n.message,n.stack):"object"==typeof n?i("object","{ "+a(d(n))+" }"):l(n),c()),n=null,o=null}function i(e){for(e=String(e);/\s\s/g.test(e);)e=e.replace(/\s\s/g," ");return" "===e?"":e.replace(/^\s+|\s+$/gm,"")}function l(){var e=null!==window.innerWidth?window.innerWidth:null!==document.body&&null!==document.body.clientWidth?document.body.clientWidth:null!==window.screen?window.screen.availWidth:0,t="debugShowLarge ";e<=640&&(t="debugShowSmall "),E.className=i(t+E.className.replace(/debugShowLarge|debugShowSmall/g,""))}function u(){var e=document.createElement("style"),o=document.createElement("span");o.appendChild(document.createTextNode("тип")),b=document.createElement("button"),b.id="hideDebug",b.type="button",b.className="close",b.appendChild(o),f=document.createElement("div"),f.id="debugMsg",m=document.createElement("div"),m.id="debug",m.appendChild(b),m.appendChild(f),l(),e.type="text/css",e.innerText="#debug{display:none} #hideDebug{padding:6px 10px;color:red;position:fixed;z-index:1;background-color:transparent;border:1px solid transparent} html.debugShowLarge #hideDebug{left:25%;right:auto;right:initial} html.debugShowLarge #debug.debugRight #hideDebug{left:auto;left:initial;right:22px} html.debugShowSmall #hideDebug {left:auto;left:initial;right:12px} html.debugmodeOn #debug{color:#eee;background-color:#111;background-color:rgba(0,0,0,0.7);text-shadow:0 0 2px #000;font-family:Consolas,'Courier New',Courier,monospace;position:fixed;top:0;left:0;right:auto;right:initial;width:30%;max-width:400px;height:100%;-ms-word-wrap:break-word;word-wrap:break-word;overflow:auto;visibility:visible;display:block;z-index:1099} html.debugmodeOn #debug.debugRight{left:auto;left:initial;right:0} html.debugShowSmall #debug{position:fixed;width:100%;max-width:100%;height:45%;top:auto;top:initial;bottom:0} html.debugShowSmall #debug.debugRight{top:0;bottom:auto;bottom:initial} .debug-object{color:cyan} .debug-function{color:magenta} .debug-error{color:red} .debug-string{color:lightblue} .debug-boolean{color:lightgreen} .debug-date{color:pink} .debug-number{color:yellow} .debug-text{color:white} .debug-array{color:orange} .debug-bigint{color:limegreen} .debug-symbol{color:hotpink} .debug-timestamp{color:#CCC;font-size:0.75em}",document.head.appendChild(e),window.document.body.insertBefore(m,window.document.body.firstChild),b.addEventListener("click",t),m.addEventListener("click",n),D=!0}function a(){b&&b.removeEventListener("click",t),m&&(m.removeEventListener("click",n),window.document.body.removeChild(m)),E&&(E.className=i(E.className.replace(/debugmodeOn|debugShowLarge|debugShowSmall/g,"")))}function d(t){if(!0===t){for(D||u(),y=t;x-- >0;)r.apply(null,S[x]);S=[]}else!1===t?(a(),D=!1,y=t):(y=!0,e.debug(t,"Error: Cannot set DebugMode to",!0));return y}function c(t){if(!0===t){for(D||u(),v=t;x-- >0;)r.apply(null,S[x]);S=[]}else!1===t?(v=t,!1===y&&(a(),D=!1)):(v=!0,e.debug(t,"Error: Cannot set DebugToConsole to",!0));return v}function g(t,n,r){!0===y?e.debug(t,n,r):(S[x]=[o(new Date),t,n,r],x++)}function s(e,t,n){if(D){var i=new Date;if(!0===w&&i.getTime()-h>5e3&&(p=0,w=!1),!1===w&&p>250&&i.getTime()<h+1e3){var l="<br />--TOO MANY MESSAGES LOGGED--<br /><br />";l+=f.innerHTML,f.innerHTML=l,l=null,w=!0}!1===w&&r(o(i),e,t,n),i=null}}var b,m,f,p=0,h=(new Date).getTime(),w=!1,y=!1,v=!1,S=[],x=0,D=!1,E=document.getElementsByTagName("html")[0];e.setDebugMode=d,e.setDebugToConsole=c,e.cacheMsg=g,e.debug=s})(APP||(APP={}));